{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://flowstudio.dev/schemas/evolution_proposals.schema.json",
  "title": "EvolutionProposals",
  "description": "Container for graph evolution proposals generated by Flow 7 (Wisdom). Written to RUN_BASE/wisdom/evolution/proposals.json for UI consumption.",
  "type": "object",
  "required": ["schema_version", "proposal_count", "proposals"],
  "properties": {
    "schema_version": {
      "type": "string",
      "const": "evolution_proposals_v1",
      "description": "Schema version for forward compatibility"
    },
    "run_base": {
      "type": "string",
      "description": "Path to the run base directory that generated these proposals"
    },
    "generated_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp when proposals were last generated/updated"
    },
    "proposal_count": {
      "type": "integer",
      "minimum": 0,
      "description": "Total number of proposals in this file"
    },
    "proposals": {
      "type": "array",
      "items": {
        "$ref": "graph_evolution_proposal.schema.json"
      },
      "description": "List of evolution proposals"
    },
    "summary": {
      "type": "object",
      "description": "Optional summary statistics for UI display",
      "properties": {
        "pending_count": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of proposals awaiting review"
        },
        "approved_count": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of approved proposals"
        },
        "applied_count": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of applied proposals"
        },
        "dismissed_count": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of dismissed proposals"
        },
        "by_flow": {
          "type": "object",
          "additionalProperties": {
            "type": "integer"
          },
          "description": "Proposal counts by target flow"
        },
        "by_type": {
          "type": "object",
          "additionalProperties": {
            "type": "integer"
          },
          "description": "Proposal counts by proposal type"
        },
        "average_confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Average confidence across all pending proposals"
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
